
<Window
    x:Class="EyeGuard.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:hc="https://handyorg.github.io/handycontrol"
    xmlns:local="clr-namespace:EyeGuard"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:tb="http://www.hardcodet.net/taskbar"
    Title="EyeGuard"
    Width="120"
    Height="60"
    AllowsTransparency="True"
    Background="Transparent"
    Loaded="Window_Loaded"
    MouseMove="Window_MouseMove"
    ResizeMode="NoResize"
    ShowInTaskbar="False"
    Topmost="True"
    WindowStyle="None"
    mc:Ignorable="d">
    <Grid MouseDown="Grid_MouseDown">
        <Grid.ContextMenu>
            <ContextMenu Name="menu" StaysOpen="true">
                <MenuItem Click="SetupPanel_Click" Header="âš™ï¸ è®¾ç½®é¢æ¿" />
                <MenuItem Name="ResetTime" Click="ResetTime_Click" Header="ðŸ”„ é‡ç½®å·¥ä½œæ—¶é—´" />
                <MenuItem Click="StartOrPause_Click" Header="â¯ï¸ å¯åŠ¨/æš‚åœè®¡æ—¶" />
                <Separator/>
                <MenuItem Header="ðŸ‘ï¸ æ¡Œé¢æ’ä»¶">
                    <MenuItem Click="WhetherToDisplay_Click" Header="æ˜¾ç¤º" Tag="display" />
                    <MenuItem Click="WhetherToDisplay_Click" Header="éšè—" Tag="hide" />
                    <Separator/>
                    <MenuItem Click="WidgetStyle_Click" Header="ç»å…¸é£Žæ ¼" Tag="0" />
                    <MenuItem Click="WidgetStyle_Click" Header="çŽ°ä»£é£Žæ ¼" Tag="1" />
                </MenuItem>
                <MenuItem Click="LockScreen_Click" Header="ðŸ”’ é”å±" />
                <Separator/>
                <MenuItem Header="ðŸš€ å¼€æœºè‡ªå¯">
                    <MenuItem Click="StartupItem_Click" Header="å¯ç”¨" Tag="SelfStarting" />
                    <MenuItem Click="StartupItem_Click" Header="ç¦ç”¨" Tag="SelfCancellation" />
                </MenuItem>
                <MenuItem Click="exit_Click" Header="âŒ é€€å‡º" />
            </ContextMenu>
        </Grid.ContextMenu>
        
        <!-- ç»å…¸é£Žæ ¼ -->
        <Border Name="ClassicWidget" Margin="2" BorderBrush="White" BorderThickness="1" 
                CornerRadius="15" Opacity="0.5" Visibility="Collapsed">
            <Border Background="Black" BorderBrush="Gray" BorderThickness="1" 
                    CornerRadius="15" Opacity="0.5" />
        </Border>
        <TextBlock Name="ClassicTime" Text="00:00" FontSize="30" Foreground="White"
                   HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="Collapsed"/>

        <!-- çŽ°ä»£é£Žæ ¼ -->
        <Border Name="ModernWidget" Margin="3" CornerRadius="18" Effect="{DynamicResource EffectShadow2}" Visibility="Collapsed">
            <Border Background="{DynamicResource RegionBrush}" BorderBrush="{DynamicResource BorderBrush}" 
                    BorderThickness="1" CornerRadius="18" Opacity="0.95">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <TextBlock Text="â°" FontSize="16" HorizontalAlignment="Center" 
                               Margin="0,4,0,0" Opacity="0.7"/>
                    
                    <TextBlock Name="ModernTime" Grid.Row="1" Text="00:00" FontSize="24" FontWeight="Bold"
                               HorizontalAlignment="Center" VerticalAlignment="Center"
                               Foreground="{DynamicResource PrimaryBrush}" Margin="0,0,0,4"/>
                </Grid>
            </Border>
        </Border>

        <tb:TaskbarIcon
            Name="MyNotifyIcon"
            ToolTipText="EyeGuard - çœ¼ç›å«å£«"
            TrayLeftMouseUp="NotifyIcon_TrayLeftMouseUp"
            TrayMouseDoubleClick="NotifyIcon_TrayMouseDoubleClick">
            <tb:TaskbarIcon.ContextMenu>
                <ContextMenu>
                    <MenuItem Click="SetupPanel_Click" Header="âš™ï¸ è®¾ç½®é¢æ¿" />
                    <MenuItem Click="StartOrPause_Click" Header="â¯ï¸ å¯åŠ¨/æš‚åœè®¡æ—¶" />
                    <MenuItem Click="ResetTime_Click" Header="ðŸ”„ é‡ç½®å·¥ä½œæ—¶é—´" />
                    <Separator/>
                    <MenuItem Header="ðŸ‘ï¸ æ¡Œé¢æ’ä»¶">
                        <MenuItem Click="WhetherToDisplay_Click" Header="æ˜¾ç¤º" Tag="display" />
                        <MenuItem Click="WhetherToDisplay_Click" Header="éšè—" Tag="hide" />
                        <Separator/>
                        <MenuItem Click="WidgetStyle_Click" Header="ç»å…¸é£Žæ ¼" Tag="0" />
                        <MenuItem Click="WidgetStyle_Click" Header="çŽ°ä»£é£Žæ ¼" Tag="1" />
                    </MenuItem>
                    <MenuItem Click="LockScreen_Click" Header="ðŸ”’ é”å±" />
                    <Separator/>
                    <MenuItem Header="ðŸš€ å¼€æœºè‡ªå¯">
                        <MenuItem Click="StartupItem_Click" Header="å¯ç”¨" Tag="SelfStarting"/>
                        <MenuItem Click="StartupItem_Click" Header="ç¦ç”¨" Tag="SelfCancellation"/>
                    </MenuItem>
                    <MenuItem Click="RestoreLocation_Click" Header="ðŸ“ æ¢å¤ä½ç½®" />
                    <MenuItem Click="Reboot_Click" Header="ðŸ”„ é‡å¯è‡ªèº«" />
                    <MenuItem Click="about_Click" Header="â„¹ï¸ å…³äºŽ" />
                    <Separator/>
                    <MenuItem Click="exit_Click" Header="âŒ é€€å‡º" />
                </ContextMenu>
            </tb:TaskbarIcon.ContextMenu>
        </tb:TaskbarIcon>
    </Grid>
</Window>
